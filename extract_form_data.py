#!/usr/bin/env python3
"""
Script to help extract the exact form data from browser dev tools
"""

def print_extraction_guide():
    """Print detailed guide for extracting form data"""
    print("ğŸ” æå–æµè§ˆå™¨è¡¨å•æ•°æ®æŒ‡å—")
    print("=" * 60)
    print()
    print("æˆ‘ä»¬éœ€è¦è·å–æµè§ˆå™¨å‘é€çš„ç¡®åˆ‡è¡¨å•æ•°æ®ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š")
    print()
    print("1. ğŸŒ æ‰“å¼€é¢„è®¢é¡µé¢:")
    print("   https://cityofmarkham.perfectmind.com/Clients/BookMe4LandingPages/Facility?facilityId=fb8d7c62-2760-48a9-9ecb-b89d8a6e02c2&widgetId=f3086c1c-7fa3-47fd-9976-0e777c8a7456&calendarId=7998c433-21f7-4914-8b85-9c61d6392511&arrivalDate=2025-10-05T23:05:36.734Z&landingPageBackUrl=https%3A%2F%2Fcityofmarkham.perfectmind.com%2FClients%2FBookMe4FacilityList%2FList%3FwidgetId%3Df3086c1c-7fa3-47fd-9976-0e777c8a7456%26calendarId%3D7998c433-21f7-4914-8b85-9c61d6392511")
    print()
    print("2. ğŸ”§ æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)")
    print("   - ç‚¹å‡» Network æ ‡ç­¾")
    print("   - æ¸…é™¤ç°æœ‰è¯·æ±‚ (ç‚¹å‡» ğŸš« å›¾æ ‡)")
    print("   - åˆ·æ–°é¡µé¢")
    print()
    print("3. ğŸ“¡ æŸ¥æ‰¾å¯ç”¨æ€§è¯·æ±‚:")
    print("   - åœ¨è¿‡æ»¤å™¨ä¸­é€‰æ‹© 'XHR' æˆ– 'Fetch'")
    print("   - æŸ¥æ‰¾å¯¹ 'FacilityAvailability' çš„è¯·æ±‚")
    print("   - ç‚¹å‡»è¯¥è¯·æ±‚")
    print()
    print("4. ğŸ“‹ å¤åˆ¶è¯·æ±‚è¯¦æƒ…:")
    print("   - åœ¨ 'Headers' æ ‡ç­¾ä¸­ï¼Œæ‰¾åˆ° 'Request Headers'")
    print("   - åœ¨ 'Payload' æˆ– 'Form Data' æ ‡ç­¾ä¸­ï¼Œæ‰¾åˆ°è¯·æ±‚ä½“")
    print("   - å¤åˆ¶æ‰€æœ‰çš„è¡¨å•æ•°æ®")
    print()
    print("5. ğŸ”„ æ›´æ–°æˆ‘ä»¬çš„è„šæœ¬:")
    print("   - å°†å¤åˆ¶çš„æ•°æ®ç²˜è´´åˆ°ä¸‹é¢çš„è„šæœ¬ä¸­")
    print("   - è¿è¡Œæµ‹è¯•")
    print()
    print("ç‰¹åˆ«éœ€è¦å…³æ³¨çš„æ•°æ®:")
    print("  - facilityId")
    print("  - date (æ—¥æœŸæ ¼å¼)")
    print("  - daysCount")
    print("  - duration")
    print("  - serviceId")
    print("  - durationIds[] (æ•°ç»„)")
    print("  - __RequestVerificationToken")
    print()
    print("å¯èƒ½çš„é—®é¢˜:")
    print("  - æ—¥æœŸæ ¼å¼ä¸æ­£ç¡®")
    print("  - serviceId ä¸åŒ¹é…")
    print("  - durationIds æ•°ç»„ä¸æ­£ç¡®")
    print("  - ç¼ºå°‘å¿…è¦çš„å‚æ•°")


def create_test_template():
    """Create a template for testing with extracted data"""
    print("\nğŸ§ª æµ‹è¯•æ¨¡æ¿")
    print("=" * 30)
    print()
    print("è¯·å°†æµè§ˆå™¨ä¸­çš„è¡¨å•æ•°æ®æ›¿æ¢åˆ°ä¸‹é¢çš„è„šæœ¬ä¸­ï¼š")
    print()
    print("```python")
    print("# ä»æµè§ˆå™¨å¼€å‘è€…å·¥å…·å¤åˆ¶çš„è¡¨å•æ•°æ®")
    print("form_data = {")
    print("    'facilityId': 'fb8d7c62-2760-48a9-9ecb-b89d8a6e02c2',")
    print("    'date': '2025-10-05T00:00:00.000Z',  # æ›¿æ¢ä¸ºå®é™…æ—¥æœŸ")
    print("    'daysCount': 7,")
    print("    'duration': 60,")
    print("    'serviceId': '308fcf95-0bbc-4fe4-b170-7ca1ad215922',  # å¯èƒ½éœ€è¦æ›´æ–°")
    print("    'durationIds[]': [")
    print("        'a828d44f-c2c4-4efa-8c0a-5b4e867f7ded',")
    print("        '0af4655c-daef-42d8-8e1c-7bbc02eb49f6',")
    print("        '09184560-08a2-45c5-ba1e-dd0f83842624',")
    print("        '80f3666e-a7d1-4b1b-a891-ff6d8852290e'")
    print("    ],")
    print("    '__RequestVerificationToken': 'REPLACE_WITH_ACTUAL_TOKEN'")
    print("}")
    print("```")
    print()
    print("ç„¶åè¿è¡Œæµ‹è¯•è„šæœ¬ã€‚")


def analyze_current_issue():
    """Analyze the current issue"""
    print("\nğŸ” å½“å‰é—®é¢˜åˆ†æ")
    print("=" * 30)
    print()
    print("æˆ‘ä»¬å·²ç»ç¡®è®¤çš„é—®é¢˜ï¼š")
    print("âœ… è®¤è¯æˆåŠŸ - èƒ½å¤Ÿè·å–éªŒè¯ä»¤ç‰Œ")
    print("âœ… APIè¯·æ±‚æˆåŠŸ - è¿”å›200çŠ¶æ€ç ")
    print("âœ… è¯·æ±‚å¤´æ­£ç¡® - åŒ¹é…æµè§ˆå™¨è¯·æ±‚")
    print("âœ… Cookiesè®¾ç½® - åŒ…å«å¿…è¦çš„cookies")
    print()
    print("âŒ é—®é¢˜ï¼šAPIè¿”å›ç©ºçš„availabilitiesæ•°ç»„")
    print()
    print("å¯èƒ½çš„åŸå› ï¼š")
    print("1. ğŸ“… æ—¥æœŸæ ¼å¼é—®é¢˜ - æˆ‘ä»¬ä½¿ç”¨çš„æ—¥æœŸæ ¼å¼å¯èƒ½ä¸æ­£ç¡®")
    print("2. ğŸ·ï¸  serviceIdé”™è¯¯ - æˆ‘ä»¬ä½¿ç”¨çš„serviceIdå¯èƒ½ä¸åŒ¹é…")
    print("3. â±ï¸  durationIdsé”™è¯¯ - æŒç»­æ—¶é—´IDæ•°ç»„å¯èƒ½ä¸æ­£ç¡®")
    print("4. ğŸ” è®¤è¯çº§åˆ« - å¯èƒ½éœ€è¦ç”¨æˆ·ç™»å½•æ‰èƒ½çœ‹åˆ°å¯ç”¨æ€§")
    print("5. ğŸ“Š å‚æ•°ç¼ºå¤± - å¯èƒ½ç¼ºå°‘å…¶ä»–å¿…è¦çš„å‚æ•°")
    print()
    print("æœ€å¯èƒ½çš„åŸå› ï¼š")
    print("ğŸ¯ æˆ‘ä»¬éœ€è¦ä½¿ç”¨æµè§ˆå™¨å‘é€çš„ç¡®åˆ‡è¡¨å•æ•°æ®")
    print("   ç‰¹åˆ«æ˜¯æ—¥æœŸæ ¼å¼å’ŒserviceId")


if __name__ == "__main__":
    print_extraction_guide()
    create_test_template()
    analyze_current_issue()
